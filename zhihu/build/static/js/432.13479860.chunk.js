"use strict";(self.webpackChunkzhihu=self.webpackChunkzhihu||[]).push([[432],{3762:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(1413),a=r(4165),o=r(5861),i=r(9439),s=r(7313),c=r(7768),u=r(508),l=r(6417);function d(e){var n=e.children,r=e.onClick,d=(0,s.useState)(!1),f=(0,i.Z)(d,2),m=f[0],p=f[1],h={};return u.Z.each(e,(function(e,n){"loading"!==n&&"children"!==n&&"onClick"!==n&&(h[n]=e)})),(0,l.jsx)(c.zx,(0,t.Z)((0,t.Z)({},h),{},{loading:m,onClick:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===typeof r){e.next=2;break}return e.abrupt("return");case 2:return p(!0),e.next=5,r(n);case 5:p(!1);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),children:n}))}},631:function(e,n,r){var t,a=r(168),o=(r(7313),r(7768)),i=r(244),s=r(8467),c=r(2135),u=r(6417),l=i.ZP.div(t||(t=(0,a.Z)(["\n    .navbar-again-box {\n        padding: 0 0.26667rem;\n        height: 1.06667rem;\n        .adm-nav-bar-title {\n            font-size: 0.42667rem;\n        }\n        .adm-nav-bar-back-arrow {\n            font-size: 0.48rem;\n        }\n    }\n"]))),d=function(e){var n=e.title,r=(0,s.s0)(),t=(0,c.lr)()[0];return(0,u.jsx)(l,{children:(0,u.jsx)(o.l2,{className:"navbar-again-box",onBack:function(){var e=t.get("to"),n=t.get("lx");/^\/detail\//.test(e)?r(e,{replace:!0}):"/personal"!==e||"singout"!==n?r(-1):r("/",{replace:!0})},children:n})})};d.defaultProps={title:"\u4e2a\u4eba\u4e2d\u5fc3"},n.Z=d},5432:function(e,n,r){r.r(n);var t,a=r(4165),o=r(5861),i=r(9439),s=r(168),c=r(7313),u=r(6037),l=r(244),d=r(7768),f=r(631),m=r(3762),p=r(2321),h=r(508),v=r(6135),x=r(6928),Z=r(6417),b=l.ZP.div(t||(t=(0,s.Z)(["\n    .adm-form {\n        padding: 0.4rem;\n    }\n\n    .adm-input-element{\n        font-size: 0.37333rem;\n    }\n\n    .adm-form-footer {\n        .adm-button {\n            display: block;\n            margin: 0 auto;\n            width: 60%;\n            height: 0.93333rem;\n            font-size: 0.37333rem;\n            border-radius: 0;\n        }\n    }\n\n    .adm-form-item {\n        font-size: 0.37333rem;\n    }\n\n    .adm-list-item-content-extra {\n        .adm-button {\n            width: 2.66667rem;\n            font-size: 0.32rem;\n            border-radius: 0;\n        }\n    }\n"])));n.default=(0,v.$j)(null,x.Z.base)((function(e){var n=e.navigate,r=e.queryLoginInfo,t=e.query,s=d.l0.useForm(),l=(0,i.Z)(s,1)[0],v=(0,c.useState)(!1),x=(0,i.Z)(v,2),g=x[0],k=x[1],j=(0,c.useState)("\u53d1\u9001\u9a8c\u8bc1\u7801"),y=(0,i.Z)(j,2),z=y[0],w=y[1],I=(0,c.useState)(!1),C=(0,i.Z)(I,2),F=C[0],q=C[1],P=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(o){var i,s,c,d,f,m;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,i=o.phone,s=o.code,e.next=5,p.Z.userLogin(i,s);case 5:if(c=e.sent,d=c.code,f=c.token,0!==+d){e.next=17;break}return h.Z.storage.set("TK",f),e.next=12,r();case 12:u.Z.success("\u767b\u5f55/\u6ce8\u518c\u6210\u529f"),(m=t.get("to"))?n(m,{replace:!0}):n("/"),e.next=19;break;case 17:u.Z.error("\u767b\u5f55/\u6ce8\u518c\u5931\u8d25"),l.setFieldValue("code","");case 19:e.next=23;break;case 21:e.prev=21,e.t0=e.catch(1);case 23:q(!1);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(n){return e.apply(this,arguments)}}(),S=null,V=function(){k(!0),w("30s\u540e\u91cd\u53d1");var e=30;S=setInterval((function(){if(1===e)return clearInterval(S),S=null,k(!1),void w("\u53d1\u9001\u9a8c\u8bc1\u7801");e--,w("".concat(e,"s\u540e\u91cd\u53d1"))}),1e3)};(0,c.useEffect)((function(){return function(){S&&(clearInterval(S),S=null)}}),[]);var $=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.validateFields(["phone"]);case 3:return n=l.getFieldValue("phone"),e.next=6,p.Z.sendPhoneCode(n);case 6:if(r=e.sent,0!==+r.code){e.next=12;break}return u.Z.success("\u53d1\u9001\u6210\u529f"),V(),e.abrupt("return");case 12:u.Z.error("\u53d1\u9001\u6210\u529f"),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(b,{children:[(0,Z.jsx)(f.Z,{title:"\u767b\u5f55/\u6ce8\u518c"}),(0,Z.jsxs)(d.l0,{layout:"horizontal",style:{"--border-top":"none","--border-bottom":"none"},footer:(0,Z.jsx)(d.zx,{color:"primary",type:"submit",loading:F,children:"\u63d0\u4ea4"}),form:l,onFinish:P,initialValues:{phone:"",code:""},children:[(0,Z.jsx)(d.l0.Item,{name:"phone",label:"\u624b\u673a\u53f7",rules:[{required:!0,message:"\u624b\u673a\u53f7\u662f\u5fc5\u586b\u9879"},{pattern:/^(?:(?:\+|00)86)?1\d{10}$/,message:"\u624b\u673a\u53f7\u683c\u5f0f\u6709\u8bef"}],children:(0,Z.jsx)(d.II,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"})}),(0,Z.jsx)(d.l0.Item,{name:"code",label:"\u9a8c\u8bc1\u7801",rules:[{required:!0,message:"\u9a8c\u8bc1\u7801\u662f\u5fc5\u586b\u9879"},{pattern:/^\d{6}$/,message:"\u9a8c\u8bc1\u7801\u683c\u5f0f\u6709\u8bef"}],extra:(0,Z.jsx)(m.Z,{size:"small",color:"primary",disabled:g,onClick:$,children:z}),children:(0,Z.jsx)(d.II,{})})]})]})}))}}]);