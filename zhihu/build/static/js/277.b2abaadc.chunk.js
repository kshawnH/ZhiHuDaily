"use strict";(self.webpackChunkzhihu=self.webpackChunkzhihu||[]).push([[277],{3762:function(n,e,r){r.d(e,{Z:function(){return d}});var t=r(1413),a=r(4165),i=r(5861),c=r(9439),s=r(7313),u=r(7768),l=r(508),o=r(6417);function d(n){var e=n.children,r=n.onClick,d=(0,s.useState)(!1),h=(0,c.Z)(d,2),p=h[0],f=h[1],m={};return l.Z.each(n,(function(n,e){"loading"!==e&&"children"!==e&&"onClick"!==e&&(m[e]=n)})),(0,o.jsx)(u.zx,(0,t.Z)((0,t.Z)({},m),{},{loading:p,onClick:function(){var n=(0,i.Z)((0,a.Z)().mark((function n(e){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("function"===typeof r){n.next=2;break}return n.abrupt("return");case 2:return f(!0),n.next=5,r(e);case 5:f(!1);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),children:e}))}},631:function(n,e,r){var t,a=r(168),i=(r(7313),r(7768)),c=r(244),s=r(8467),u=r(2135),l=r(6417),o=c.ZP.div(t||(t=(0,a.Z)(["\n    .navbar-again-box {\n        padding: 0 0.26667rem;\n        height: 1.06667rem;\n        .adm-nav-bar-title {\n            font-size: 0.42667rem;\n        }\n        .adm-nav-bar-back-arrow {\n            font-size: 0.48rem;\n        }\n    }\n"]))),d=function(n){var e=n.title,r=(0,s.s0)(),t=(0,u.lr)()[0];return(0,l.jsx)(o,{children:(0,l.jsx)(i.l2,{className:"navbar-again-box",onBack:function(){var n=t.get("to"),e=t.get("lx");/^\/detail\//.test(n)?r(n,{replace:!0}):"/personal"!==n||"singout"!==e?r(-1):r("/",{replace:!0})},children:e})})};d.defaultProps={title:"\u4e2a\u4eba\u4e2d\u5fc3"},e.Z=d},4277:function(n,e,r){r.r(e);var t,a=r(4165),i=r(5861),c=r(9439),s=r(168),u=r(7313),l=r(6037),o=r(244),d=r(7768),h=r(631),p=r(6135),f=r(6928),m=r(2321),x=r(3762),v=r(6417),Z=o.ZP.div(t||(t=(0,s.Z)(["\n    .formBox {\n        padding: 0.4rem;\n        .item {\n            display: flex;\n            align-items: center;\n            margin-bottom: 0.26667rem;\n            height: 1.46667rem;\n            line-height: 1.46667rem;\n            font-size: 0.37333rem;\n            &:nth-child(1){\n                height: 2.13333rem;\n                line-height: 2.13333rem;\n            }\n            .label {\n                width: 20%;\n                text-align: center;\n            }\n            .input {\n                width: 80%;\n            }\n        }\n        .adm-space-item{\n            padding-bottom: 0;\n        }\n    }\n\n    .submit {\n        display: block;\n        margin: 0 auto;\n        width: 60%;\n        height: 0.93333rem;\n        font-size: 0.37333rem;\n    }\n"])));e.default=(0,p.$j)((function(n){return n.base}),f.Z.base)((function(n){var e=n.profile,r=n.queryLoginInfo,t=n.navigate,s=(0,u.useState)([{url:e.pic}]),o=(0,c.Z)(s,2),p=o[0],f=o[1],b=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(e){var r,t,i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m.Z.upload(e);case 3:if(r=n.sent,t=r.code,i=r.pic,0!==+t){n.next=10;break}return l.Z.success("\u4e0a\u4f20\u6210\u529f"),f([{url:i}]),n.abrupt("return",{url:i});case 10:l.Z.error("\u4e0a\u4f20\u5931\u8d25"),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(0);case 15:return f([]),n.abrupt("return",Promise.reject());case 17:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}(),g=(0,u.useState)(e.name),k=(0,c.Z)(g,2),j=k[0],w=k[1],y=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(){var e,i,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=j.trim(),i="",Array.isArray(p)&&p.length>0&&(i=p[0].url),e&&i){n.next=5;break}return l.Z.error("\u59d3\u540d/\u5934\u50cf\u4e0d\u80fd\u4e3a\u7a7a"),n.abrupt("return");case 5:return n.prev=5,n.next=8,m.Z.updateUserInfo(e,i);case 8:if(c=n.sent,0===+c.code){n.next=13;break}return l.Z.error("\u4fee\u6539\u5931\u8d25"),n.abrupt("return");case 13:return n.next=15,r();case 15:l.Z.success("\u4fee\u6539\u6210\u529f"),t(-1),n.next=21;break;case 19:n.prev=19,n.t0=n.catch(5);case 21:case"end":return n.stop()}}),n,null,[[5,19]])})));return function(){return n.apply(this,arguments)}}();return(0,v.jsxs)(Z,{children:[(0,v.jsx)(h.Z,{title:"\u4fee\u6539\u4fe1\u606f"}),(0,v.jsxs)("div",{className:"formBox",children:[(0,v.jsxs)("div",{className:"item",children:[(0,v.jsx)("div",{className:"label",children:"\u5934\u50cf"}),(0,v.jsx)("div",{className:"input",children:(0,v.jsx)(d.wA,{maxCount:1,value:p,onDelete:function(){f([])},beforeUpload:function(n){return n.size>1048576?(l.Z.error("\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc71MB"),null):n},upload:b,showFailed:!1})})]}),(0,v.jsxs)("div",{className:"item",children:[(0,v.jsx)("div",{className:"label",children:"\u59d3\u540d"}),(0,v.jsx)("div",{className:"input",children:(0,v.jsx)(d.II,{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7\u540d\u79f0",value:j,onChange:function(n){w(n)}})})]}),(0,v.jsx)(x.Z,{color:"primary",className:"submit",onClick:y,children:"\u63d0\u4ea4"})]})]})}))}}]);